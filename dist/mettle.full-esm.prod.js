/*!
 * Mettle.js v1.0.1
 * (c) 2021-2025 maomincoding
 * Released under the MIT License.
 */
const e=(t,n,o,r)=>{let l;n[0]=0;for(let i=1;i<n.length;i++){const s=n[i++],c=n[i]?(n[0]|=s?1:2,o[n[i++]]):n[++i];3===s?r[0]=c:4===s?r[1]=Object.assign(r[1]||{},c):5===s?(r[1]=r[1]||{})[n[++i]]=c:6===s?r[1][n[++i]]+=c+"":s?(l=t.apply(c,e(t,c,o,["",null])),r.push(l),c[0]?n[0]|=2:(n[i-2]=0,n[i]=l)):r.push(c)}return r},t=new Map,n=function(n){let o=t.get(this);return o||(o=new Map,t.set(this,o)),o=e(this,o.get(n)||(o.set(n,o=function(e){let t,n,o=1,r="",l="",i=[0];const s=e=>{1===o&&(e||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(0,e,r):3===o&&(e||r)?(i.push(3,e,r),o=2):2===o&&"..."===r&&e?i.push(4,e,0):2===o&&r&&!e?i.push(5,0,!0,r):o>=5&&((r||!e&&5===o)&&(i.push(o,0,r,n),o=6),e&&(i.push(o,e,0,n),o=6)),r=""};for(let c=0;c<e.length;c++){c&&(1===o&&s(),s(c));for(let a=0;a<e[c].length;a++)t=e[c][a],1===o?"<"===t?(s(),i=[i],o=3):r+=t:4===o?"--"===r&&">"===t?(o=1,r=""):r=t+r[0]:l?t===l?l="":r+=t:'"'===t||"'"===t?l=t:">"===t?(s(),o=1):o&&("="===t?(o=5,n=r,r=""):"/"===t&&(o<5||">"===e[c][a+1])?(s(),3===o&&(i=i[0]),o=i,(i=i[0]).push(2,0,o),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(s(),o=2):r+=t),3===o&&"!--"===r&&(o=4,i=i[0])}return s(),i}(n)),o),arguments,[]),o.length>1?o:o[0]}.bind((function(e,t,n){let o=null,r=null,l=null;for(r in t)"key"===r&&(o=t[r]);return arguments.length>2&&(l=arguments.length>3?Array.prototype.slice.call(arguments,2):n),{tag:e,props:t,children:l,key:o,el:null}}));function o(e){const t=Object.create(null),n=e.split(",");for(let e=0;e<n.length;e++)t[n[e]]=!0;return function(e){return t[e]}}const r=o("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot"),l=o("svg,animate,circle,clippath,cursor,image,defs,desc,ellipse,filter,font-faceforeignobject,g,glyph,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feFlood,feGaussianBlur,feImage,feMerge,feMorphology,feOffset,feSpecularLighting,feTile,feTurbulence,feDistantLight,fePointLight,feSpotLight,linearGradient,stop,radialGradient,animateTransform,animateMotion");function i(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)}const s={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function c(e){return Object.prototype.toString.call(e).match(/\[object (.+?)\]/)[1].toLowerCase()}function a(e){return null==e}function u(e,t){return e.tag===t.tag&&e.key===t.key}function f(e,t){return e.hasOwnProperty(t)}function p(e){return!(!e||"object"!==c(e))&&(f(e,"tag")&&f(e,"props")&&f(e,"children")&&f(e,"key"))}function h(e){return Array.isArray(e)?function(e){return e.every(p)}(e):p(e)}function d(e){console.warn(`[Mettle.js warn]: ${e}`)}function g(e,t){Object.assign(e.style,t)}function m(e,t,n){const o=t.slice(2).toLowerCase();"function"==typeof n&&e.addEventListener(o,n)}function b(e,t,n){const o=t.slice(2).toLowerCase();"function"==typeof n&&e.removeEventListener(o,n)}function y(e,t,n){if(i(t)){const o="http://www.w3.org/1999/xlink";e.setAttributeNS(o,t,n.toString())}else"boolean"!=typeof n?e.setAttribute(t,n.toString()):n?e.setAttribute(t,""):e.removeAttribute(t)}function w(e,t){var n;i(t)?e.removeAttributeNS("http://www.w3.org/1999/xlink",i(n=t)?n.slice(6,n.length):""):e.removeAttribute(t)}function v(e){switch(!0){case r(e):return document.createElement(e);case l(e):return t=function(e){return l(e)?"svg":"math"===e?"math":void 0}(e),n=e,document.createElementNS(s[t],n);case"fragment"===e:return document.createDocumentFragment();case"comment"===e||"null"===e:return document.createComment(e);default:return document.createElement(e)}var t,n}const k="1.0.1",j=["$ref","$once","$memo"];let M=new WeakMap;const S=new WeakMap;function A(e,t){t.textContent=e}function C(e,t){const n=e.children,o=t.children,r=c(o);if("array"===r)for(let e=0;e<o.length;e++){const t=o[e],r=n[e];p(t)&&(t.el=r.el,C(r,t))}else"object"===r&&(o.el=n.el)}function L(e,t,n){const{tag:o,props:r,children:l}=e;if(!a(o)){const i=c(o);if("string"===i){const i=v(o);if(e.el=i,!a(r)){const e=Object.keys(r);for(let t=0;t<e.length;t++){const n=e[t],o=r[n],l=c(o);n.startsWith("on")&&m(i,n,o),"function"===l||"key"===n||j.includes(n)||y(i,n,o),"style"===n&&"object"===l&&g(i,o),n===j[0]&&"object"===l&&S.set(o,i)}}if(!a(l))if(h(l)){const e=c(l);if("array"===e)for(let e=0;e<l.length;e++){const t=l[e];p(t)&&L(t,i)}else"object"===e&&L(l,i)}else i&&A(l,i);if(n)t.insertBefore(i,n);else{if(!t)return i;t.appendChild(i)}}else if("function"===i){const e={content:o,setData:x.bind(o),props:r},n=o.call(o,e);o.template=n;const l=n();L(l,t),M.set(o,l)}}}function O(e,t,n){if((!e.props||!e.props.hasOwnProperty(j[1]))&&function(e,t){return"function"!==c(t.tag)&&"function"!==c(e.tag)}(e,t))if(u(e,t)){const o=t.el=e.el,r=e.props||{},l=t.props||{},i={},s=Object.keys(l),f=Object.keys(r),d=new Set(s);for(let e=0;e<s.length;e++)i[s[e]]=!0;for(let e=0;e<f.length;e++)i[f[e]]=!0;const v=Object.keys(i);for(let e=0;e<v.length;e++){const t=v[e],n=l[t],i=r[t];if(n===i)continue;if(a(n)){w(o,t);continue}const s=c(n),u="function"===s,f="style"===t;if(u){n.toString()!==i.toString()&&(b(o,t,i),m(o,t,n));continue}if(f&&"object"===s){g(o,n);continue}"key"!==t&&!j.includes(t)&&!u&&y(o,t,n)}for(let e=0;e<f.length;e++){const t=f[e];d.has(t)||w(o,t)}if(e.props&&e.props.hasOwnProperty(j[2])&&!e.props.$memo[0]&&e.props.$memo[1]===n)return void C(e,t);const k=e.children,M=t.children;"array"===c(k)&&"array"===c(M)?function(e,t,n,o){const r=t.length;let l=0,i=e.length-1,s=r-1;for(;l<=i&&l<=s&&u(e[l],t[l]);)O(e[l],t[l],o),l++;for(;l<=i&&l<=s&&u(e[i],t[s]);)O(e[i],t[s],o),i--,s--;if(l>i){if(l<=s){const e=s+1,o=e<r?t[e].el:null;for(;l<=s;)n.insertBefore(L(t[l]),o),l++}}else if(l>s)for(;l<=i;)n.removeChild(e[l].el),l++;else{const c=l,a=l,f=new Map;for(l=a;l<=s;l++){const e=t[l];null!=e.key&&f.set(e.key,l)}let p,h=0;const d=s-a+1;let g=!1,m=0;const b=new Array(d);for(l=0;l<d;l++)b[l]=0;for(let r=c;r<=i;r++){if(h>=d){n.removeChild(e[r].el);continue}let l;if(null!==e[r].key)l=f.get(e[r].key);else for(p=a;p<=s;p++)if(0===b[p-a]&&u(e[r],t[p])){l=p;break}void 0===l?n.removeChild(e[r].el):(b[l-a]=r+1,l>m?m=l:g=!0,O(e[r],t[l],o),h++)}const y=g?function(e){const t=e.slice(),n=[0];let o,r,l,i,s;const c=e.length;for(o=0;o<c;o++){const c=e[o];if(0!==c){if(r=n[n.length-1],e[r]<c){t[o]=r,n.push(o);continue}for(l=0,i=n.length-1;l<i;)s=(l+i)/2|0,e[n[s]]<c?l=s+1:i=s;c<e[n[l]]&&(l>0&&(t[o]=n[l-1]),n[l]=o)}}for(l=n.length,i=n[l-1];l-- >0;)n[l]=i,i=t[i];return n}(b):[];p=y.length-1;for(let e=d-1;e>=0;e--){const o=e+a,l=o+1<r?t[o+1].el:null;0===b[e]?n.insertBefore(L(t[o]),l):g&&(p<0||e!==y[p]?n.insertBefore(t[o].el,l):p--)}}}(k,M,o,n):p(k)&&p(M)?O(k,M,n):h(k)||h(M)||k===M||A(M,o)}else{const n=e.el.parentNode,o=e.el.nextSibling;n.removeChild(e.el),L(t,n,o)}}async function x(e,t,n){if("function"==typeof e&&"undefined"!=typeof Promise)try{await Promise.resolve(e());const o=t||this,r=o.template();O(M.get(o),r,n),M.set(o,r)}catch(e){d(e.message)}}function E(e,t){const n=e.tag,o={content:n,setData:x.bind(n),props:e.props},r=n.call(n,o);n.template=r;const l=r(),i=function(e){if("string"==typeof e){const t=document.querySelector(e);if(!t){let t=null;return e.startsWith("#")?(t=document.createElement("div"),t.setAttribute("id",e.substring(1,e.length))):e.startsWith(".")?(t=document.createElement("div"),t.setAttribute("class",e.substring(1,e.length))):d(`Failed to mount app: mount target selector "${e}" returned null.`),document.body.insertAdjacentElement("afterbegin",t),t}return t}return e instanceof HTMLElement?e:window.ShadowRoot&&e instanceof window.ShadowRoot&&"closed"===e.mode?(d('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs.'),null):null}(t);L(l,i),M.set(n,l),q=i,P()}let T=[],$=0,D=0;function B(e=null){null!==e&&("function"==typeof e?T.push(e):d("The parameter of onMounted is not a function!"))}function P(){if(T.length>0)for(let e=0,t=T.length;e<t;e++)T[e]&&T[e]();D=$,$=0,T=[]}let W=[];function N(e=null){null!==e&&("function"==typeof e?($+=1,W.push(e)):d("The parameter of onUnmounted is not a function!"))}let q=Object.create(null);function F(e){!function(){if(W.length>0){for(let e=0;e<D;e++)W[e]&&W[e]();W.splice(0,D)}D=$}(),q.innerHTML="",M=null,M=new WeakMap;const t={content:e,setData:x.bind(e)},n=e.call(e,t);e.template=n;const o=n();L(o,q),M.set(e,o),P()}export{E as createApp,S as domInfo,n as html,B as onMounted,N as onUnmounted,F as resetView,x as setData,k as version};
